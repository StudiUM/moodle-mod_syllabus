define(["jquery","core/str","core/modal_factory","core/modal_events","core/templates","core/notification"],function(a,b,c,d,e,f){var g=function(a,b){this.init(a,b)};return g.prototype.modal=null,g.prototype.init=function(g,h){var i=this;return b.get_string("requiredfields_title","mod_syllabus").then(function(a){return c.create({type:c.types.SAVE_CANCEL,title:a})}.bind(this)).then(function(b){return i.modal=b,i.modal.setLarge(),i.modal.getRoot().on(d.shown,function(){var a={};g.length>1?(a.hasmoreonetab=!0,a.hasonetab=!1):(a.hasmoreonetab=!1,a.hasonetab=!0),a.tabs=g,e.render("mod_syllabus/requiredfields",a).done(function(a){i.modal.setBody(a)}).fail(f.exception)}.bind(this)),i.modal.getRoot().on(d.save,function(){var b=window.onbeforeunload;window.onbeforeunload=null,b(),a(h).submit(),window.onbeforeunload=b}.bind(this)),i.modal.getRoot().on(d.cancel,function(){i.modal.destroy()}.bind(this)),i.modal.getRoot().on(d.hidden,function(){i.modal.destroy()}.bind(this)),i.modal.show(),i.modal}.bind(this))},{init:function(a,b){return new g(a,b)}}});